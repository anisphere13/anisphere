# 0- Instructions

| Section                                                                                                                                    | D√©tail                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|:-------------------------------------------------------------------------------------------------------------------------------------------|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Section                                                                                                                                    | D√©tail                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 1Ô∏è‚É£ Pr√©sentation G√©n√©rale                                                                                                                   | üìå AniSph√®re est une application modulaire pour le suivi des animaux, adapt√©e aux particuliers et aux professionnels. üéØ Objectif : Suivi de la sant√©, du pistage, de l‚Äôentra√Ænement et du bien-√™tre animal via IA locale et cloud, suivi GPS et optimisation des co√ªts Firebase.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| Technologies principales                                                                                                                   | ‚úî Flutter ‚Üí D√©veloppement mobile (Android/iOS) et Web futur. ‚úî Hive ‚Üí Base locale pour limiter Firebase. ‚úî Firebase ‚Üí Authentification, Firestore, notifications. ‚úî TensorFlow Lite ‚Üí IA locale pour analyse comportementale et OCR. ‚úî OpenCV ‚Üí Analyse d‚Äôimages et reconnaissance optique. ‚úî Cloud Firestore & Firebase Storage ‚Üí Stockage cloud optimis√©. ‚úî Ubuntu ‚Üí Environnement de d√©veloppement. üí° Optimisation Firebase : Stockage principalement en local, Firestore uniquement si n√©cessaire, synchronisation diff√©r√©e pour r√©duire les co√ªts.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| 2Ô∏è‚É£ Noyau Central & Modules                                                                                                                 | üìå Le noyau g√®re les fonctionnalit√©s principales et la communication entre modules. ‚úî Gestion des utilisateurs et des animaux ‚úî Interconnexion entre modules ‚úî Supervision de l‚ÄôIA locale et cloud ‚úî Optimisation du stockage (Hive & Firebase) ‚úî Gestion centralis√©e des notifications et des permissions                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| Magasin de Modules                                                                                                                         | ‚úÖ Modules ind√©pendants et t√©l√©chargeables. ‚úÖ Gestion des permissions pour limiter l‚Äôacc√®s selon le profil utilisateur.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| Fonctionnalit√©s int√©gr√©es                                                                                                                  | ‚úî OCR (factures, ordonnances v√©t√©rinaires) ‚úî Compression des fichiers pour r√©duire la charge serveur ‚úî Logs & historique des actions ‚úî Mode hors-ligne & synchronisation diff√©r√©e                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| üí° Pourquoi cette architecture ?                                                                                                           | ‚úî Flexibilit√© (modules activables selon les besoins). ‚úî Optimisation des performances (moins de charge inutile). ‚úî R√©duction des co√ªts Firebase. ‚úî Exp√©rience utilisateur fluide et unifi√©e.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 3Ô∏è‚É£ Ergonomie & Interface                                                                                                                   | üìå Inspir√©e de Samsung Health pour une navigation intuitive. ‚úî 4 onglets fixes en bas : 1Ô∏è‚É£ Accueil ‚Üí Tableau de bord dynamique. 2Ô∏è‚É£ Partage ‚Üí Acc√®s aux donn√©es partag√©es. 3Ô∏è‚É£ Magasin de Modules ‚Üí Activation/d√©sactivation des modules. 4Ô∏è‚É£ Mes Animaux ‚Üí Profils des animaux avec suivi (sant√©, pistage, entra√Ænement).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| Am√©liorations UX                                                                                                                           | ‚úÖ L‚Äôordre des modules et l‚Äôaffichage des infos s‚Äôadaptent automatiquement. ‚úÖ Slide vers le haut ‚Üí Acc√®s rapide aux actions essentielles. ‚úÖ Mode sombre et clair automatique selon l‚Äôheure.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| 4Ô∏è‚É£ Organisation des Conversations                                                                                                          | üìå Pour un suivi structur√© du d√©veloppement ‚úî Conversation G√©n√©rale ‚Üí D√©cisions strat√©giques & roadmap ‚úî Une conversation par module ‚Üí D√©veloppement d√©taill√© et suivi des fonctionnalit√©s ‚úî Conversation Bugs & Tests ‚Üí Rapports de bugs, corrections et am√©liorations                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| üí° Pourquoi cette structure ?                                                                                                              | ‚úî Chaque module est g√©r√© ind√©pendamment ‚úî La conversation g√©n√©rale garde une vue d‚Äôensemble ‚úî Les tests sont s√©par√©s du d√©veloppement pour plus de clart√©                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 5Ô∏è‚É£ Suivi de D√©veloppement & Roadmap                                                                                                        | üìå Le fichier "Suivi_AniSphere.ods" est la r√©f√©rence principale.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| R√©sum√© des Feuilles du Suivi                                                                                                               | 0. Instructions ‚Üí Informations globales sur le projet et directives principales. 1- Idees ‚Üí Liste des nouvelles fonctionnalit√©s et optimisations futures. 2- Roadmap ‚Üí Plan des grandes √©tapes du projet et priorit√©s. 3- Suivi des T√¢ches  ‚Üí Liste d√©taill√©e des t√¢ches en cours, leur statut et leur avancement.  4- Gestion des Collections ‚Üí Structuration et suivi des √©l√©ments enregistr√©s dans l‚Äôapplication. 5- UX  ‚Üí Principes d‚Äôergonomie, navigation et exp√©rience utilisateur d‚ÄôAniSph√®re. 6- Technos par Module ‚Üí Liste des technologies utilis√©es et leur attribution par module.  7- IA ‚Üí Planification et structuration des intelligences artificielles du projet. 8- Mod√®le √âco ‚Üí Strat√©gie de mon√©tisation et gestion financi√®re du projet. 9- Planification Photos ‚Üí Organisation des m√©dias et contenus visuels du projet. 10- Architecture ‚Üí architecture modulaire claire et √©volutive, facilitant la s√©paration des responsabilit√©s, la maintenance, et l‚Äôactivation des modules selon les besoins de l‚Äôutilisateur. |
| 6Ô∏è‚É£ Optimisation des Performances et Co√ªts                                                                                                  | üìå Objectif : R√©duction des co√ªts Firebase et optimisation de l‚ÄôIA. ‚úî Stockage local (Hive) prioris√© ‚úî Synchronisation Firebase diff√©r√©e pour limiter les acc√®s ‚úî Optimisation des requ√™tes Firestore ‚úî Compression des fichiers avant envoi                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| Suivi des performances                                                                                                                     | ‚úî Firebase Analytics ‚Üí Statistiques d‚Äôusage ‚úî Datadog / Sentry ‚Üí Suivi des performances ‚úî Outils Flutter ‚Üí Analyse des lenteurs                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 7Ô∏è‚É£ Mon√©tisation et Rentabilit√©                                                                                                             | üìå Optimisation des revenus via abonnement et modules payants. ‚úî Modules gratuits vs payants ‚Üí D√©finition d‚Äôun mod√®le √©conomique clair ‚úî Abonnements personnalis√©s selon les profils utilisateurs ‚úî Optimisation Firebase pour limiter les frais ‚úî Mise en place d‚Äôune boutique interne                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| üí° Strat√©gie de rentabilit√© rapide                                                                                                         | ‚úî Offrir des fonctionnalit√©s gratuites attractives ‚úî Convertir les utilisateurs en abonn√©s payants via des options premium ‚úî Limiter la charge serveur pour maximiser la marge                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 8Ô∏è‚É£ Strat√©gie de Mise √† Jour et Versioning                                                                                                  | üìå Gestion efficace des versions pour √©viter la fragmentation. ‚úî Mises √† jour majeures ‚Üí Ajout de nouvelles fonctionnalit√©s ‚úî Mises √† jour mineures ‚Üí Am√©liorations et corrections de bugs ‚úî Patches correctifs ‚Üí Corrections rapides sans modification de structure                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| D√©ploiement                                                                                                                                | ‚úî Mise √† jour progressive via Firebase Remote Config ‚úî Gestion des tests en pr√©-production avant publication ‚úî Canal b√™ta pour testeurs avant mise en ligne g√©n√©rale                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 9Ô∏è‚É£ S√©curit√© et Gestion des Acc√®s                                                                                                           | üìå Authentification et protection des donn√©es utilisateur. ‚úî OAuth / Google Sign-in / Apple Sign-in ‚Üí Acc√®s s√©curis√© ‚úî Chiffrement des donn√©es en local et sur Firebase ‚úî Gestion avanc√©e des permissions et r√¥les utilisateur                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| üí° Strat√©gie de s√©curit√© avanc√©e                                                                                                           | ‚úî Contr√¥le strict des acc√®s aux modules ‚úî Protection contre les acc√®s non autoris√©s ‚úî Mises √† jour r√©guli√®res pour √©viter les failles                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| üîπ 10Ô∏è‚É£ Interop√©rabilit√© et API                                                                                                             | üìå Connexion aux syst√®mes v√©t√©rinaires et int√©grations futures. ‚úî Exportation des donn√©es de suivi sant√© et pistage ‚úî Cr√©ation d‚ÄôAPI priv√©e pour compatibilit√© avec d‚Äôautres applications                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| üí° Objectif                                                                                                                                | ‚úî Faciliter la collaboration avec v√©t√©rinaires et refuges ‚úî Rendre AniSph√®re compatible avec d‚Äôautres syst√®mes                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| üéØ Objectif : D√©velopper rapidement l‚Äôapplication AniSph√®re, sans bugs, de mani√®re modulaire, progressive et lisible, m√™me pour un novice. | M√©thode de travail int√©gr√©e avec ChatGPT + Copilot¬†: 1- ChatGPT g√©n√®re le code de la fonctionnalit√© demand√©e (fonction, widget, service)2- Tu colles le code √† la fin du fichier concern√©3- Copilot le d√©tecte, le repositionne dans le bon bloc, compl√®te les imports, ajuste la structure4- Tu ex√©cutes ton script ./dev.sh ‚Üí Build, analyse, test5- Tu valides ou corriges, puis tu ajoutes une t√¢che termin√©e dans ton tableau Notion ou ton tableur .ods6- Tu redemandes une nouvelle fonctionnalit√© √† ChatGPT                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |

---

## ‚úÖ Prompt de D√©veloppement AniSph√®re ‚Äì Version Compl√®te & Professionnelle

### üéØ Objectif global :
Assurer un d√©veloppement **modulaire, rapide, auto-apprenant et intelligent**, avec :
- Une **architecture claire** et respect√©e
- Un **workflow fluide entre ChatGPT, Copilot et tests**
- Une **UX optimis√©e** inspir√©e de Samsung Health
- Une **IA hybride auto-apprenante locale/cloud**
- Un **suivi automatis√© en `.md`** (plus de tableur)
- Une **strat√©gie Firebase √©co-performante**

### üß± Structure modulaire √† respecter

Pour le module `[[NOM DU MODULE]]`, tu cr√©eras :

```
lib/modules/[[nom_module]]/
‚îú‚îÄ‚îÄ models/
‚îú‚îÄ‚îÄ services/
‚îú‚îÄ‚îÄ screens/
‚îú‚îÄ‚îÄ widgets/
‚îú‚îÄ‚îÄ logic/      # IA, OCR, traitement (facultatif)
‚îú‚îÄ‚îÄ tests/      # unit / widget / integration
```

Chaque fichier suit cette structure avec une **s√©paration stricte des responsabilit√©s**.

### ‚öôÔ∏è M√©thode de travail recommand√©e

1Ô∏è‚É£ √âtapes par fichier : me demander chaque fichier avant de coder. Ne g√©n√©rer que ce fichier.

2Ô∏è‚É£ Continuit√© propre : terminer par `"Fin de [[nom_du_fichier.dart]] ‚Äì Reprendre √† : [[√©tape suivante]]"`

3Ô∏è‚É£ Copilot : ajouter un prompt clair en haut du fichier pour guider Copilot.

4Ô∏è‚É£ Explication : o√π coller, √† quoi √ßa sert, comment utiliser, d√©pendances.

5Ô∏è‚É£ D√©pendances : commandes `flutter pub add`, modifications `pubspec.yaml`.

### ‚úÖ Tests Automatis√©s

- √Ä chaque fonctionnalit√©, proposer : `unit_test`, `widget_test`, `integration_test`
- Dossiers g√©n√©r√©s avec `generate_test_module.dart`
- Suivi dans `docs/test_tracker.md` via `update_test_tracker.dart`

### üîÅ GitHub Actions Automatis√©es

| Action | Fichier | Effet |
|--------|---------|-------|
| Tests auto | `.github/workflows/flutter_tests.yml` | Push sur `main`, `flutter test` |
| Tracker auto | `.github/workflows/update_test_tracker.yml` | Suivi tests dans `docs/` |
| G√©n√©ration | `scripts/generate_test_module.dart` | 3 fichiers test/module |
| Markdown | `scripts/update_test_tracker.dart` | G√©n√®re `docs/test_tracker.md` |

### üé® UX AniSph√®re

- Navigation Samsung Health
- Slide Up ‚Üí Actions rapides
- Notifications haut droite
- Modules activables
- UI adaptative (IA)
- Effets visuels, retour haptique
- Accessibilit√© pouss√©e

### üí∞ Optimisation Firebase

- Hive/SQLite par d√©faut
- Firestore = backup ou diff√©r√©
- Compression, sync diff√©r√©e, `isSynced`, d√©clencheurs automatiques

### ü§ñ IA Hybride Auto-apprenante

| Niveau | Local | Cloud |
|--------|-------|-------|
| Noyau  | Suivi, erreurs, IA base | IA globale |
| Module | Comportement, OCR | Suggestions IA |
| Sant√©  | OCR TFLite | IA cloud BigQuery |
‚Üí Apprentissage actif pour tous, m√™me sans abonnement.

### üìà Mon√©tisation

- IA cloud + modules premium
- Export PDF, traductions = micro-achat
- IA gratuite mais limit√©e sans abonnement

### ‚úÖ Suivi Markdown

Docs mis √† jour automatiquement :
- `docs/suivi_[module].md`
- Tests : `docs/test_tracker.md`

### ‚ú® Exemple lancement

> ‚ÄúCommence le module `Sant√©` :  
1. `health_record_model.dart`  
2. `health_service.dart`  
3. `health_form_screen.dart`‚Äù



---

## üß± Architecture du projet AniSph√®re


# üîπ Architecture Modulaire AniSph√®re ‚Äì Version 2025

AniSph√®re utilise une architecture **modulaire, propre et √©volutive**, facilitant :
- La s√©paration claire des responsabilit√©s
- Le d√©veloppement progressif par module
- L'int√©gration d'IA locale/cloud
- Le suivi automatis√© du d√©veloppement et des tests

---

## üìÅ Structure globale du projet

```
anisphere/
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îú‚îÄ‚îÄ modules/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ noyau/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ providers/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ screens/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ screens/                      # √âcrans globaux (non modulaires)
‚îÇ   ‚îú‚îÄ‚îÄ services/                     # Services globaux (Firebase, Local, Init)
‚îÇ   ‚îú‚îÄ‚îÄ firebase_options.dart
‚îÇ   ‚îî‚îÄ‚îÄ main.dart
‚îÇ
‚îú‚îÄ‚îÄ test/
‚îÇ   ‚îú‚îÄ‚îÄ global/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ integration/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ unit/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ widget/
‚îÇ   ‚îú‚îÄ‚îÄ noyau/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ integration/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ unit/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ widget/
‚îÇ   ‚îî‚îÄ‚îÄ test_module_modele/
‚îÇ       ‚îú‚îÄ‚îÄ integration/
‚îÇ       ‚îú‚îÄ‚îÄ unit/
‚îÇ       ‚îî‚îÄ‚îÄ widget/
‚îÇ
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îú‚îÄ‚îÄ generate_test_module.dart
‚îÇ   ‚îî‚îÄ‚îÄ update_test_tracker.dart
‚îÇ
‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îú‚îÄ‚îÄ 0__instructions.md
‚îÇ   ‚îú‚îÄ‚îÄ 1__idees.md
‚îÇ   ‚îú‚îÄ‚îÄ 2__roadmap.md
‚îÇ   ‚îú‚îÄ‚îÄ 3__suivi_taches.md
‚îÇ   ‚îú‚îÄ‚îÄ 4__gestion_des_collections.md
‚îÇ   ‚îú‚îÄ‚îÄ 5__ux.md
‚îÇ   ‚îú‚îÄ‚îÄ 6__technos_par_module.md
‚îÇ   ‚îú‚îÄ‚îÄ 7__ia.md
‚îÇ   ‚îú‚îÄ‚îÄ 8__mod√®le_√©co.md
‚îÇ   ‚îú‚îÄ‚îÄ 9__planification_photos.md
‚îÇ   ‚îú‚îÄ‚îÄ 10__architecture.md
‚îÇ   ‚îî‚îÄ‚îÄ test_tracker.md
‚îÇ
‚îú‚îÄ‚îÄ .github/workflows/
‚îÇ   ‚îú‚îÄ‚îÄ flutter_tests.yml
‚îÇ   ‚îî‚îÄ‚îÄ update_test_tracker.yml

‚îú‚îÄ‚îÄ pubspec.yaml
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ README_DEV.md
‚îî‚îÄ‚îÄ sync.sh
```

---

## ‚úÖ R√®gles de structuration

- Tous les modules sont dans `lib/modules/[nom_module]/`
- Le **noyau** est un module comme les autres (`modules/noyau`)
- Chaque module a ses propres :
  - `models/`
  - `screens/`
  - `services/`
  - `providers/`
  - `logic/` (facultatif : IA, OCR, traitement)
  - `tests/` (reli√©s √† `test/[nom_module]/`)
- Les services partag√©s (auth, Firebase, Hive) sont dans `lib/services/`

---

## üß™ Tests automatis√©s

- Chaque module poss√®de un dossier `test/[module]/` avec :
  - `unit/` ‚Äì logique m√©tier
  - `widget/` ‚Äì interface Flutter
  - `integration/` ‚Äì ensemble complet
- G√©n√©ration automatique :
```bash
dart run scripts/generate_test_module.dart
```
- Suivi automatique dans `docs/test_tracker.md` :
```bash
dart run scripts/update_test_tracker.dart
```

---

## ‚öôÔ∏è CI/CD et automatisation

- Tests lanc√©s √† chaque push :
  `.github/workflows/flutter_tests.yml`
- Suivi Markdown mis √† jour :
  `.github/workflows/update_test_tracker.yml`

---

## üí° Avantages

- Architecture claire et modulaire
- Int√©gration parfaite avec GitHub Copilot
- Suivi automatique en `.md`
- IA hybride facilement activable
- Mon√©tisation int√©gr√©e module par module
- Maintenance facilit√©e sur le long terme
